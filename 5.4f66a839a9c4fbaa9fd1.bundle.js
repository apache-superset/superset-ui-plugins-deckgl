(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1018:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(951),o=n(954),r=n(945),s=n(946),a=function(t){return t.length},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;Object(r.a)(this,t),this.sortedBins=this.getSortedBins(e,n),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return Object(s.a)(t,[{key:"getSortedBins",value:function(t,e){return t.reduce((function(t,n,i){var o=e(n.points);return null!=o&&t.push({i:Number.isFinite(n.index)?n.index:i,value:o,counts:n.points.length}),t}),[]).sort((function(t,e){return t.value-e.value}))}},{key:"getValueRange",value:function(t){var e=Object(o.a)(t,2),n=e[0],i=e[1],r=this.sortedBins.length;if(!r)return[0,0];var s=Math.ceil(n/100*(r-1)),a=Math.floor(i/100*(r-1));return[this.sortedBins[s].value,this.sortedBins[a].value]}},{key:"getMaxCount",value:function(){var t=0;return this.sortedBins.forEach((function(e){return t=t>e.counts?t:e.counts})),t}},{key:"getBinMap",value:function(){return this.sortedBins.reduce((function(t,e){return Object.assign(t,Object(i.a)({},e.i,e))}),{})}}]),t}()},1019:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}));var i=n(966);function o(t,e){return function(n){return function(t,e,n){var o=t[1]-t[0];if(o<=0)return i.a.warn("quantizeScale: invalid domain, returning range[0]")(),e[0];var r=o/e.length,s=Math.floor((n-t[0])/r);return e[Math.max(Math.min(s,e.length-1),0)]}(t,e,n)}}function r(t,e){return function(n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]}}},1021:function(t,e,n){"use strict";var i=n(63),o=n(922),r=n(36),s=n(462),a=n(461),c=n(941),l=n(942);class u extends l.a{constructor(t){super(t=>this.format(t));const{id:e=Object(c.a)("config.id"),label:n,description:i="",formatFunc:o=Object(c.a)("config.formatFunc"),isInvalid:r=!1}=t;this.id=e,this.label=null!=n?n:e,this.description=i,this.formatFunc=o,this.isInvalid=r}format(t){return null==t||Number.isNaN(t)?`${t}`:t===Number.POSITIVE_INFINITY?"∞":t===Number.NEGATIVE_INFINITY?"-∞":this.formatFunc(t)}preview(t=12345.432){return`${t} => ${this.format(t)}`}}var d=u;var f={DOLLAR:"$,.2f",DOLLAR_ROUND:"$,d",DOLLAR_ROUND_SIGNED:"+$,d",DOLLAR_SIGNED:"+$,.2f",FLOAT:",.2f",FLOAT_1_POINT:",.1f",FLOAT_2_POINT:",.2f",FLOAT_3_POINT:",.3f",FLOAT_SIGNED:"+,.2f",FLOAT_SIGNED_1_POINT:"+,.1f",FLOAT_SIGNED_2_POINT:"+,.2f",FLOAT_SIGNED_3_POINT:"+,.3f",INTEGER:",d",INTEGER_SIGNED:"+,d",PERCENT:",.2%",PERCENT_1_POINT:",.1%",PERCENT_2_POINT:",.2%",PERCENT_3_POINT:",.3%",PERCENT_SIGNED:"+,.2%",PERCENT_SIGNED_1_POINT:"+,.1%",PERCENT_SIGNED_2_POINT:"+,.2%",PERCENT_SIGNED_3_POINT:"+,.3%",SI:".3s",SI_1_DIGIT:".1s",SI_2_DIGIT:".2s",SI_3_DIGIT:".3s",SMART_NUMBER:"SMART_NUMBER",SMART_NUMBER_SIGNED:"SMART_NUMBER_SIGNED"};const h=Object(s.a)(".3~s"),v=Object(s.a)(".2~f"),g=Object(s.a)(".4~f");function m(t={}){const{description:e,signed:n=!1,id:i,label:o}=t,r=n?t=>t>0?"+":"":()=>"";return new d({description:e,formatFunc:t=>`${r(t)}${function(t){if(0===t)return"0";const e=Math.abs(t);return e>=1e3?h(t).replace("G","B"):e>=1?v(t):e>=.001?g(t):e>1e-6?`${h(1e6*t)}µ`:h(t)}(t)}`,id:i||n?f.SMART_NUMBER_SIGNED:f.SMART_NUMBER,label:null!=o?o:"Adaptive formatter"})}class p extends o.a{constructor(){super({name:"NumberFormatter",overwritePolicy:r.a.WARN}),this.registerValue(f.SMART_NUMBER,m()),this.registerValue(f.SMART_NUMBER_SIGNED,m({signed:!0})),this.setDefaultKey(f.SMART_NUMBER)}get(t){const e=`${null==t||""===t?this.defaultKey:t}`.trim();if(this.has(e))return super.get(e);const n=function(t){const{description:e,formatString:n=Object(c.a)("config.formatString"),label:i,locale:o}=t;let r,l=!1;try{r=void 0===o?Object(s.a)(n):Object(a.a)(o).format(n)}catch(t){r=t=>`${t} (Invalid format: ${n})`,l=!0}return new d({description:e,formatFunc:r,id:n,isInvalid:l,label:i})}({formatString:e});return this.registerValue(e,n),n}format(t,e){return this.get(t)(e)}}n.d(e,"a",(function(){return b}));const _=Object(i.a)(p);function b(t,e){return _().format(t,e)}},1079:function(t,e,n){"use strict";var i=n(945),o=n(946),r=n(948),s=n(947),a=n(958),c=n(949),l=n(1030),u=n(1005),d=n(1294),f=n(1145),h=n(1136),v=n(990),g=n(966),m=n(1282),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var n=t.id,o=void 0===n?Object(m.c)("column-geometry"):n,a=_(t),c=a.indices,l=a.attributes;return Object(r.a)(this,Object(s.a)(e).call(this,Object(v.a)({},t,{id:o,indices:c,attributes:l})))}return Object(c.a)(e,t),e}(n(1071).a);function _(t){var e=t.radius,n=t.height,i=void 0===n?1:n,o=t.nradial,r=void 0===o?10:o,s=t.vertices;g.a.assert(!s||s.length>=r);for(var a=r+1,c=3*a,l=2*Math.PI/r,u=new Uint16Array(3*r*2),d=new Float32Array(3*c),f=new Float32Array(3*c),h=0,v=0;v<a;v++)for(var m=v*l,p=s&&s[v%r],_=s&&s[(v+1)%r],b=Math.sin(m),S=Math.cos(m),P=0;P<2;P++)d[h+0]=p?p[0]:S*e,d[h+1]=p?p[1]:b*e,d[h+2]=(.5-P)*i,f[h+0]=p?_[0]-p[0]:S,f[h+1]=p?_[1]-p[1]:b,h+=3;for(var C=0;C<a;C++){var I=Math.floor(C/2)*Math.sign(C%2-.5),N=I*l,y=s&&s[(I+r)%r],O=Math.sin(N),x=Math.cos(N);d[h+0]=y?y[0]:x*e,d[h+1]=y?y[1]:O*e,d[h+2]=i/2,f[h+2]=1,h+=3}for(var M=0,E=0;E<r;E++)u[M++]=2*E+0,u[M++]=2*E+2,u[M++]=2*E+0,u[M++]=2*E+1,u[M++]=2*E+1,u[M++]=2*E+3;return{indices:u,attributes:{POSITION:{size:3,value:d},NORMAL:{size:3,value:f}}}}n.d(e,"a",(function(){return I}));var b=d.a.fp64LowPart,S=new f.a,P=[0,0,0,255],C={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,fp64:!1,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(t){return t.position}},getFillColor:{type:"accessor",value:P},getLineColor:{type:"accessor",value:P},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:S,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},I=function(t){function e(){return Object(i.a)(this,e),Object(r.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(o.a)(e,[{key:"getShaders",value:function(){return{vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  \n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio += sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, pos, position_commonspace);\n\n  vec3 normals_commonspace = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, position_commonspace.xyz, normals_commonspace);\n    vColor = vec4(lightColor, color.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceFillColors:{size:4,type:5121,transition:!0,accessor:"getFillColor",defaultValue:P},instanceLineColors:{size:4,type:5121,transition:!0,accessor:"getLineColor",defaultValue:P},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(t){var n=t.props,i=t.oldProps,o=t.changeFlags;Object(a.a)(Object(s.a)(e.prototype),"updateState",this).call(this,{props:n,oldProps:i,changeFlags:o});var r=n.fp64!==i.fp64;if(r){var c=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(c)}),this.getAttributeManager().invalidateAll()}(r||n.diskResolution!==i.diskResolution||n.vertices!==i.vertices)&&this._updateGeometry(n)}},{key:"getGeometry",value:function(t,e){var n=new p({radius:1,height:2,vertices:e,nradial:t}),i=0;if(e)for(var o=0;o<t;o++){var r=e[o];i+=Math.sqrt(r[0]*r[0]+r[1]*r[1])/t}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/t)*i}),n}},{key:"_getModel",value:function(t){return new h.a(t,Object.assign({},this.getShaders(),{id:this.props.id,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_updateGeometry",value:function(t){var e=t.diskResolution,n=t.vertices,i=this.getGeometry(e,n);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3,wireframeVertexCount:i.indices.value.length}),this.state.model.setProps({geometry:i})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,i=this.props,o=i.lineWidthUnits,r=i.lineWidthScale,s=i.lineWidthMinPixels,a=i.lineWidthMaxPixels,c=i.elevationScale,l=i.extruded,u=i.filled,d=i.stroked,f=i.wireframe,h=i.offset,v=i.coverage,g=i.radius,m=i.angle,p=this.state,_=p.model,b=p.fillVertexCount,S=p.wireframeVertexCount,P=p.edgeDistance,C="pixels"===o?n.distanceScales.metersPerPixel[2]:1;_.setUniforms(Object.assign({},e,{radius:g,angle:m/180*Math.PI,offset:h,extruded:l,coverage:v,elevationScale:c,edgeDistance:P,widthScale:r*C,widthMinPixels:s,widthMaxPixels:a})),l&&f&&(_.setProps({isIndexed:!0}),_.setVertexCount(S).setDrawMode(1).setUniforms({isStroke:!0}).draw()),u&&(_.setProps({isIndexed:!1}),_.setVertexCount(b).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!l&&d&&(_.setProps({isIndexed:!1}),_.setVertexCount(2*b/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}},{key:"calculateInstancePositions64xyLow",value:function(t,e){var n=e.startRow,i=e.endRow,o=this.use64bitPositions();if(t.constant=!o,o){var r=this.props,s=r.data,a=r.getPosition,c=t.value,u=n*t.size,d=Object(l.a)(s,n,i),f=d.iterable,h=d.objectInfo,v=!0,g=!1,m=void 0;try{for(var p,_=f[Symbol.iterator]();!(v=(p=_.next()).done);v=!0){var S=p.value;h.index++;var P=a(S,h);c[u++]=b(P[0]),c[u++]=b(P[1])}}catch(t){g=!0,m=t}finally{try{v||null==_.return||_.return()}finally{if(g)throw m}}}else t.value=new Float32Array(2)}}]),e}(u.a);I.layerName="ColumnLayer",I.defaultProps=C},471:function(t,e,n){"use strict";var i={};n.r(i),n.d(i,"default",(function(){return u})),n.d(i,"DEFAULT_NAMESPACE",(function(){return f})),n.d(i,"getNamespace",(function(){return h})),n.d(i,"getColor",(function(){return v})),n.d(i,"getScale",(function(){return g}));var o=n(140),r=n(942);function s(t){return String(t).trim()}class a extends r.a{constructor(t,e){super(t=>this.getColor(t)),this.colors=t,this.scale=Object(o.a)(),this.scale.range(t),this.parentForcedColors=e,this.forcedColors={}}getColor(t){const e=s(t),n=this.parentForcedColors&&this.parentForcedColors[e];if(n)return n;const i=this.forcedColors[e];return i||this.scale(e)}setColor(t,e){return this.forcedColors[s(t)]=e,this}getColorMap(){const t={};return this.scale.domain().forEach(e=>{t[e.toString()]=this.scale(e)}),{...t,...this.forcedColors,...this.parentForcedColors}}copy(){const t=new a(this.scale.range(),this.parentForcedColors);return t.forcedColors={...this.forcedColors},t.domain(this.domain()),t.unknown(this.unknown()),t}domain(t){return void 0===t?this.scale.domain():(this.scale.domain(t),this)}range(t){return void 0===t?this.scale.range():(this.colors=t,this.scale.range(t),this)}unknown(t){return void 0===t?this.scale.unknown():(this.scale.unknown(t),this)}}var c=a,l=n(469);class u{constructor(t){this.name=t,this.scales={},this.forcedItems={}}getScale(t){var e,n;const i=null!=(e=null!=t?t:Object(l.a)().getDefaultKey())?e:"",o=this.scales[i];if(o)return o;const r=Object(l.a)().get(i),s=new c(null!=(n=null==r?void 0:r.colors)?n:[],this.forcedItems);return this.scales[i]=s,s}setColor(t,e){return this.forcedItems[s(t)]=e,this}}const d={},f="GLOBAL";function h(t=f){const e=d[t];if(e)return e;const n=new u(t);return d[t]=n,n}function v(t,e,n){return h(n).getScale(e).getColor(t)}function g(t,e){return h(e).getScale(t)}n.d(e,"a",(function(){return i}))}}]);